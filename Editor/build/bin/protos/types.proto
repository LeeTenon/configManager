// 此文件及其余文件存放各种结构体
syntax = "proto3";

package config;

import "go-zero.proto";

message RpcServerBaseConfig {
  string Name = 1;
  ServerApiServerConf _ServerApiServerConf = 2;
  Common __Common = 3;
  string ListenOn = 4;
  ServerMode Mode = 5;
}

message ApiServerBaseConfig {
  string Name = 1;
  ServerRpcServerConf _ServerRpcServerConf = 2;
  Common __Common = 3;
  int64 Port = 4;
  ServerMode Mode = 5;
}

message Common {
  Etcd Etcd = 1;
  Rabbit Rabbit = 2;
  Database Database = 3;
  TaskHandler TaskHandler = 4;
}

message Rabbit{
  string Host = 1;
  int64 HttpPort = 2;
  string User = 3;
  string Password = 4;
  int64 MqQos = 5;
}

message Database {
  Mysql Mysql = 1;
  Redis Redis = 2;
  Dynamo Dynamo = 3;
}

message Mysql {
  string Host = 1;
  int64 MaxOpenConnections = 2;
  int64 MaxIdleConnections = 3;
  string MaxConnectionLifetime = 4;
}

message Redis {
  string Host = 1;
  string Pass = 2;
  bool Verbose = 3;
  bool Tls = 4;
  bool TlsSkipVerify = 5;
  string TlsHandshakeTimeout = 6;
  int64 MaxIdle = 7;
  int64 MaxActive = 8;
  string IdleTimeout = 9;
  string ConnectTimeout = 10;
  string ReadTimeout = 11;
  string WriteTimeout = 12;
}

message Dynamo {
  EStorageType StorageType = 1;
  string Host = 2;
  string Endpoint = 3;
  string Prefix = 4;
  int64 MaxLength = 5;
  string Tick = 6;
}

message TaskHandler {
  int64 Threshold = 1;
  int64 Threads = 2;
  string Deadline = 3;
  string RetryInterval = 4;
  int64 UpdateRetryTimes = 5;
  int64 InsertRetryTimes = 6;
}

message MQConfig{
  int64 Threshold = 1;
  int64 Threads = 2;
  int64 RetryTimes = 3;
}

enum Level {
  WARNING = 0;
  FATAL = 1;
  SEVERE = 2;
}

enum EStorageType{
  memory = 0;
  dynamo = 1;
}